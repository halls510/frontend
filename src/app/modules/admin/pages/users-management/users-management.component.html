<div class="users-management">
  <h1>Gerenciamento de UsuÃ¡rios</h1>

  <div class="actions">
    <button (click)="openCreateModal()">â• Adicionar UsuÃ¡rio</button>
    <input type="text" [(ngModel)]="searchQuery" placeholder="ğŸ” Buscar usuÃ¡rio..." />
  </div>

  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Nome</th>
        <th>Email</th>
        <th>FunÃ§Ã£o</th>
        <th>Status</th>
        <th>EndereÃ§o</th>
        <th>GeolocalizaÃ§Ã£o</th>
        <th>AÃ§Ãµes</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of filteredUsers()">
        <td>{{ user.id }}</td>
        <td>{{ user.name }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.role }}</td>
        <td [ngClass]="{'active': user.status === 'Active', 'inactive': user.status === 'Inactive'}">
          {{ user.status }}
        </td>
        <td>
          ğŸ“Œ {{ user.address.street }}, {{ user.address.number }}<br>
          {{ user.address.city }} - {{ user.address.state }}<br>
          {{ user.address.zipCode }}, {{ user.address.country }}
        </td>
        <td>
          ğŸ“ Lat: {{ user.address.geolocation.lat }}<br>
          ğŸ“ Long: {{ user.address.geolocation.long }}
        </td>
        <td>
          <button class="edit" (click)="editUser(user)">âœï¸ Editar</button>
          <button class="delete" (click)="deleteUser(user.id)">ğŸ—‘ï¸ Excluir</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Modal de AdiÃ§Ã£o/EdiÃ§Ã£o -->
<div class="modal" *ngIf="showModal">
  <div class="modal-content">
    <h2>{{ isEditing ? 'âœï¸ Editar UsuÃ¡rio' : 'â• Adicionar UsuÃ¡rio' }}</h2>

    <label>Nome:</label>
    <input type="text" [(ngModel)]="newUser.name" placeholder="Digite o nome" />

    <label>Email:</label>
    <input type="email" [(ngModel)]="newUser.email" placeholder="Digite o email" />

    <label>FunÃ§Ã£o:</label>
    <select [(ngModel)]="newUser.role">
      <option value="Admin">Admin</option>
      <option value="Manager">Manager</option>
      <option value="Customer">Customer</option>
    </select>

    <label>Status:</label>
    <select [(ngModel)]="newUser.status">
      <option value="Active">Ativo</option>
      <option value="Inactive">Inativo</option>
    </select>

    <h3>EndereÃ§o</h3>
    <label>Rua:</label>
    <input type="text" [(ngModel)]="newUser.address.street" placeholder="Rua" />

    <label>NÃºmero:</label>
    <input type="text" [(ngModel)]="newUser.address.number" placeholder="NÃºmero" />

    <label>Cidade:</label>
    <input type="text" [(ngModel)]="newUser.address.city" placeholder="Cidade" />

    <label>Estado:</label>
    <input type="text" [(ngModel)]="newUser.address.state" placeholder="Estado" />

    <label>CEP:</label>
    <input type="text" [(ngModel)]="newUser.address.zipCode" placeholder="CEP" />

    <label>PaÃ­s:</label>
    <input type="text" [(ngModel)]="newUser.address.country" placeholder="PaÃ­s" />

    <h3>GeolocalizaÃ§Ã£o</h3>
    <label>Latitude:</label>
    <input type="number" step="any" [(ngModel)]="newUser.address.geolocation.lat" placeholder="Latitude" />

    <label>Longitude:</label>
    <input type="number" step="any" [(ngModel)]="newUser.address.geolocation.long" placeholder="Longitude" />

    <button class="save" (click)="saveUser()">ğŸ’¾ Salvar</button>
    <button class="cancel" (click)="showModal = false">âŒ Cancelar</button>
  </div>
</div>
